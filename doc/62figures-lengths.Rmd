
<!-- ======================================================================= -->
<!-- **********************  Length Samples ******************************** --> 
<!-- ======================================================================= -->


```{r, echo = FALSE, warning  = FALSE}
#add in length comp plots with captions and labels
#fleets with length
# 
# for (i in unique(model$len_comp_fit_table$Fleet)) {
#   add_figure(
#     filein =list.files(base_loc_plots, 
#                  pattern = paste0("comp_lendat_bubflt", i), full.names = TRUE)[1],
#     caption = paste0("Length composition data from the ", model$FleetNames_parsed[i]),
#     label = paste0("len-data-", model$FleetNames_label[i]),
#     width = 60,
#     height = 60
#   )
#   
#   

len.filein = list.files(base_loc_plots, 
                 pattern = paste0("comp_lendat_bubflt*"), full.names = TRUE) %>%
  data.frame() %>%
  rename(lfile = ".") %>%
  mutate(flts = stringr::str_extract(lfile,".?+(?=lt).+?(?=mkt)")) %>%
  group_by(flts) %>% slice(1) %>%
  mutate(flt1 = as.numeric(gsub("[[:alpha:]]", "", flts))) %>%
  arrange(flt1)
```

```{r, results = 'asis'}
 for (i in 1:length(len.filein$flt1)) {   
   add_figure( 
     filein = len.filein$lfile[i],
    caption = paste0("Length composition data from the ", fleet_info$FleetNames_parsed[fleet_info$fleet_ID==len.filein$flt1[i]] ),
    label = paste0("len-data-", fleet_info$FleetNames_label[fleet_info$fleet_ID==len.filein$flt1[i]])
  )
}

```